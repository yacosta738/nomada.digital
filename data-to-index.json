[{"content":" figure.lazy { display: none; } La astronomía y la programación son dos de mis pasiones que en esta ocasión he decidido juntar. Con este objetivo crearemos una web sencilla para llevar la cuenta regresiva de cuantos días faltan hasta el nuevo año simulando el movimiento del planeta tierra. El demo se puede apreciar en el siguiente link https://yacosta738.github.io/countdown-to-new-year/\n figure.lazy { display: none; } Lo primero es crear un fichero style.css donde se define el estilo y la órbita de cada planeta:\n html { box-sizing: border-box; } html *, html *:before, html *:after { box-sizing: inherit; } body { display: flex; justify-content: center; align-items: center; width: 100vw; height: 100vh; overflow: hidden; font-size: 62.5%; background-color: #121212; font-family: Arial, Helvetica, sans-serif; margin: 0; padding: 0; } .solar-system { position: relative; width: 100%; max-width: 700px; padding-top: 100%; right: -50%; } @media (min-width: 700px) { .solar-system { padding-top: 700px; } } /*** ORBITS ***/ .orbit { position: absolute; top: 50%; left: 50%; border: 2px dotted rgba(84 84 84 / 15%); border-radius: 100%; transform: translate(-50%, -50%); } .orbit-sun { width: calc(50%); height: calc(50%); border: 1px dotted #ff6600; background: #ffcc00; } .orbit-sun:before { content: \u0026quot;\u0026quot;; background: #ff660017; width: 99%; height: 99%; display: block; margin-left: 0.5%; margin-top: 0.5%; border-radius: 100%; box-shadow: 0 0 10em 5em #ff66006b, 0 0 100px 50px #ff66006b inset, 0 0 10px 5px #ffcc00f2; } .orbit.orbit-sun:after { content: \u0026quot;SUN\u0026quot;; color: #ffa200; top: 50%; position: absolute; left: -3.5em; } .orbit-mercury { width: calc(100%); height: calc(100%); transform: translate(-50%, -50%); } .orbit-venus { width: calc(150%); height: calc(150%); transform: translate(-50%, -50%); } .orbit-earth { width: calc(200%); height: calc(200%); } .orbit-earth:after { content: \u0026quot;\u0026quot;; border: 2px solid red; width: 1em; height: 1em; display: block; position: relative; border-color: #54cbeb #54cbeb transparent transparent; transform: rotate(-50deg); border-width: 2px 2px 0 0; top: 52.75%; left: -0.5em; -webkit-animation: blinker 2s linear infinite; animation: blinker 2s linear infinite; } .orbit-mars { width: calc(280%); height: calc(280%); transform: translate(-50%, -50%); } .orbit-asteroids { width: calc(380%); height: calc(380%); transform: translate(-50%, -50%) rotate(0deg); } /*** PLANETS ***/ .planet { position: absolute; top: 50%; border-radius: 100%; opacity: 0; transform: translateY(-50%); transition: opacity 0s ease 0s; } .planet-mercury { left: -6px; width: 10px; height: 10px; transition-duration: 1s; background: #bcc1c9; } .planet-venus { left: -8px; width: 14px; height: 14px; transition-duration: 2s; background: #ec5f24 } .planet-earth { left: -13px; width: 24px; height: 24px; transition-duration: 3s; z-index: 1; } .planet-mars { left: -9px; width: 18px; height: 18px; transition-duration: 4s; background: #d83e3c; } .planet-asteroids { left: -38px; width: 308px; height: 1500px; transition: all 5s ease 0s; } .planet-mercury:before { content: \u0026quot;MERCURY\u0026quot;; color: #bcc1c9; margin-left: 15px; top: 0px; position: absolute; height: 10px; line-height: 10px; } .planet-venus:before { content: \u0026quot;VENUS\u0026quot;; color: #ec5f24; margin-left: 21px; top: 1px; position: absolute; height: 14px; line-height: 14px; } .planet-earth:before { content: \u0026quot;EARTH\u0026quot;; color: #54cbeb; margin-left: 29px; top: 1px; position: absolute; height: 24px; line-height: 24px; } .planet-mars:before { content: \u0026quot;MARS\u0026quot;; color: #d83e3c; margin-left: 23px; top: 1px; position: absolute; height: 18px; line-height: 18px; } .planet-asteroids:before { content: \u0026quot;ASTEROID BELT\u0026quot;; color: #666666; margin-left: 8em; top: 36.75%; position: absolute; } .planet-mars:after, .planet-venus:after, .planet-mercury:after, .planet-earth:after { content: \u0026quot;\u0026quot;; background: linear-gradient(105deg, rgba(0,0,0,1), rgba(0,0,0,0.6), transparent, transparent); display: block; width: 100%; height: 100%; border-radius: 100%; box-shadow: 0 0 3px 2px #ffffff26; opacity: 0.8; position: absolute; top: 0; left: 0; } .planet-earth:after { box-shadow: 0 0 5px 3px #54cbeb5c; } .planet img { width: 100%; } /*** SELECTED DAYS ***/ .new-year-line, .winter-solstice-line { width: 12em; border-bottom: 2px dotted white; position: absolute; left: -13.35em; top: 50%; z-index: -1; color: white; margin-top: -13px; margin-left: -50%; height: 14px; line-height: 1em; } .new-year-line:after, .winter-solstice-line:after { content: \u0026quot;\u0026quot;; width: 28px; height: 28px; display: block; float: right; position: absolute; background: #ffffff00; right: -28px; top: -1px; border: 2px dotted #fff; border-radius: 100%; } .winter-solstice-line { margin-top: 120px; left: -12.05em; } #cronoNewYear, #cronoWinterSolstice { left: 0; position: absolute; color: #fff; width: 100%; bottom: -17px; font-size: 1.1em; } #cronoNewYear span, #cronoWinterSolstice span { font-size: 0.75em; color: #666; } /*** WARNING ***/ #warning { position: fixed; left: 2em; bottom: 2em; background: rgb(0 0 0 / 0.75); height: 5em; width: 45em; font-size: 1.35em; color: #ffa200; z-index: 3; text-transform: uppercase; padding: 0; text-align: center; display: flex; justify-content: center; align-items: center; } #warning:before { content: \u0026quot; ! \u0026quot;; z-index: 2; font-size: 1.9em; margin-left: 1.15em; color: #ffa200; font-weight: bold; margin-top: 5px; } #warning:after { content: \u0026quot;\u0026quot;; background: #ffa200; position: absolute; left: 0; width: 5em; height: 5em; z-index: 0; } #warning p { display: block !important; float: left; width: 100%; margin: 0 !important; padding-left: 2.5em; } #warning p:before { content: \u0026quot;\u0026quot;; position: absolute; z-index: 1; border: 1.75em solid transparent; border-bottom: 2.85em solid #040404; left: 0.775em; top: -0.75em; } #reload { background: rgb(255 162 0); border: 0; border-radius: 1px; padding: 0.5em 0.75em; margin-left: 1.5em; cursor: pointer; outline: none; } #reload:hover { background: #54cbeb; } /* ANIMATIONS */ @-webkit-keyframes blinker { 0% { opacity:0; top:52.85%;} 40% { opacity:1; top:51%; } 50% { opacity:0; top:51%; } 60% { opacity:1; top:51%; } 100% { opacity:0; top:48.25%;} } @keyframes blinker { 0% { opacity:0; top:52.85%;} 40% { opacity:1; top:51%; } 50% { opacity:0; top:51%; } 60% { opacity:1; top:51%; } 100% { opacity:0; top:48.25%;} } @-webkit-keyframes spin { from {transform: rotate(0deg) } to {transform: rotate(-360deg);} } @keyframes spin { from {transform: rotate(0deg) } to {transform: rotate(-360deg);} } Después creamos el fichero script.js donde se define toda la lógica para calcular la cantidad de días que faltan para el nuevo año:\n//prevent loading error document.getElementById('warning').remove(); //short getElementById elem = function (id) { return document.getElementById(id); } //count until date const newYearDate = new Date(`Jan 1, ${new Date().getFullYear() + 1} 00:00:00`).getTime(); //title angles const todayDate = new Date().getTime(); const todaySecondsLeft = (newYearDate - todayDate) / 1000; const todayDays = parseInt(todaySecondsLeft / 86400); const randMer = Math.floor(Math.random() * (4 - 1 + 1)) + 1; const randVen = Math.floor(Math.random() * (10 - 4 + 1)) + 4; const randMar = Math.floor(Math.random() * (16 - 8 + 1)) + 8; const style = document.createElement('style'); style.innerHTML = '.orbit-mercury {transform: translate(-50%, -50%) rotate(' + randMer + 'deg)} .orbit-venus {transform: translate(-50%, -50%) rotate(' + randVen + 'deg)} .orbit-mars {transform: translate(-50%, -50%) rotate(' + randMar + 'deg)} .planet-mercury {transform:rotate(-' + randMer + 'deg)} .planet-venus {transform:rotate(-' + randVen + 'deg)} .planet-mars {transform:rotate(-' + randMar + 'deg)} .planet-earth {transform:rotate(' + todayDays + 'deg)} .planet-venus {transform:rotate(-' + randVen + 'deg)} '; document.head.appendChild(style); //countdown vars let days, hours, minutes, seconds; //countdown const countDown = setInterval(function () { const rightNow = new Date().getTime(); const timeTo = newYearDate - rightNow; days = Math.floor(timeTo / (1000 * 60 * 60 * 24)); hours = Math.floor((timeTo % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)); minutes = Math.floor((timeTo % (1000 * 60 * 60)) / (1000 * 60)); seconds = Math.floor((timeTo % (1000 * 60)) / 1000); if (hours \u0026lt; 10) hours = \u0026quot;0\u0026quot; + hours; if (minutes \u0026lt; 10) minutes = \u0026quot;0\u0026quot; + minutes; if (seconds \u0026lt; 10) seconds = \u0026quot;0\u0026quot; + seconds; elem(\u0026quot;cronoNewYear\u0026quot;).innerHTML = days + \u0026quot; \u0026lt;span\u0026gt;DAYS\u0026lt;/span\u0026gt; \u0026amp;nbsp;\u0026quot; + hours + \u0026quot;:\u0026quot; + minutes + \u0026quot;:\u0026quot; + seconds + \u0026quot; \u0026lt;span\u0026gt;LEFT\u0026lt;/span\u0026gt;\u0026quot;; let newDays; if (days \u0026lt; 0) { elem(\u0026quot;cronoNewYear\u0026quot;).style.display = 'none'; newDays = days.toString().substr(1); } else { newDays = \u0026quot;-\u0026quot; + days; } elem(\u0026quot;position-earth\u0026quot;).style.transform = 'translate(-50%, -50%) rotate(' + newDays + 'deg'; let solsDays; const cDays = days - 11; if (cDays \u0026lt; 0) { elem(\u0026quot;cronoWinterSolstice\u0026quot;).style.display = 'none'; } else { solsDays = cDays } elem(\u0026quot;cronoWinterSolstice\u0026quot;).innerHTML = solsDays + \u0026quot; \u0026lt;span\u0026gt;DAYS\u0026lt;/span\u0026gt; \u0026amp;nbsp;\u0026quot; + hours + \u0026quot;:\u0026quot; + minutes + \u0026quot;:\u0026quot; + seconds + \u0026quot; \u0026lt;span\u0026gt;LEFT\u0026lt;/span\u0026gt;\u0026quot;; const opacityList = document.querySelectorAll('.planet'); for (let i = 0; i \u0026lt; opacityList.length; i++) { opacityList[i].style.opacity = '1'; } if (timeTo \u0026lt; 0) { clearInterval(countDown); } }, 1000); Por último se crea un fichero index.html que contendrá todo el código html de nuestra página web. El documento html comienza con la definición del tipo de documento seguido por el lenguaje de la página, en la sección del encabezado encontramos el título, algunos metadatos así como la importación de los estilos de la página. En el cuerpo del documento hacemos usos de las clases creadas previamente para poder visualizar los planetas y sus órbitas. Al final importamos el fichero javascript creado con anterioridad:\n\u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026quot;en\u0026quot; \u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026quot;UTF-8\u0026quot;\u0026gt; \u0026lt;title\u0026gt;Countdown to New Year \u0026lt;/title\u0026gt; \u0026lt;link rel=\u0026quot;stylesheet\u0026quot; href=\u0026quot;https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css\u0026quot;\u0026gt; \u0026lt;link rel=\u0026quot;stylesheet\u0026quot; href=\u0026quot;./style.css\u0026quot;\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;!-- partial:index.partial.html --\u0026gt; \u0026lt;div class=\u0026quot;solar-system\u0026quot;\u0026gt; \u0026lt;div class=\u0026quot;orbit orbit-sun\u0026quot;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;div class=\u0026quot;orbit orbit-mercury\u0026quot; id=\u0026quot;position-mercury\u0026quot;\u0026gt; \u0026lt;div class=\u0026quot;planet planet-mercury\u0026quot; id=\u0026quot;opacity-mercury\u0026quot;\u0026gt; \u0026lt;img src=\u0026quot;assets/image/mercury.png\u0026quot; alt=\u0026quot;mercury\u0026quot;\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026quot;orbit orbit-venus\u0026quot; id=\u0026quot;position-venus\u0026quot;\u0026gt; \u0026lt;div class=\u0026quot;planet planet-venus\u0026quot; id=\u0026quot;opacity-venus\u0026quot;\u0026gt; \u0026lt;img src=\u0026quot;assets/image/venus.png\u0026quot; alt=\u0026quot;venus\u0026quot;\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026quot;orbit orbit-earth\u0026quot; id=\u0026quot;position-earth\u0026quot;\u0026gt; \u0026lt;div class=\u0026quot;planet planet-earth\u0026quot; id=\u0026quot;opacity-earth\u0026quot;\u0026gt; \u0026lt;img src=\u0026quot;assets/image/earth.png\u0026quot; alt=\u0026quot;earth\u0026quot;\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026quot;orbit orbit-mars\u0026quot; id=\u0026quot;position-mars\u0026quot;\u0026gt; \u0026lt;div class=\u0026quot;planet planet-mars\u0026quot; id=\u0026quot;opacity-mars\u0026quot;\u0026gt; \u0026lt;img src=\u0026quot;assets/image/mars.png\u0026quot; alt=\u0026quot;mars\u0026quot;\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026quot;orbit orbit-asteroids\u0026quot; id=\u0026quot;position-asteroids\u0026quot;\u0026gt; \u0026lt;div class=\u0026quot;planet planet-asteroids\u0026quot; id=\u0026quot;opacity-asteroids\u0026quot;\u0026gt; \u0026lt;img src=\u0026quot;assets/image/asteroids-belt.png\u0026quot; alt=\u0026quot;asteroids\u0026quot;\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026quot;new-year-line\u0026quot;\u0026gt;NEW YEAR \u0026lt;span id='cronoNewYear'\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;div class=\u0026quot;winter-solstice-line\u0026quot;\u0026gt;WINTER SOLSTICE \u0026lt;span id=\u0026quot;cronoWinterSolstice\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div id=\u0026quot;warning\u0026quot;\u0026gt;\u0026lt;p\u0026gt;it seems that the earth has gone out of its orbit... \u0026lt;button id=\u0026quot;reload\u0026quot; onclick=\u0026quot;location.reload()\u0026quot;\u0026gt;RE-ORBIT\u0026lt;/button\u0026gt;\u0026lt;/p\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;!-- partial --\u0026gt; \u0026lt;script src=\u0026quot;./script.js\u0026quot;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; figure.lazy { display: none; } Todo el código se puede descargar desde GitHub en el siguiente link https://github.com/yacosta738/countdown-to-new-year\n","dateformatted":"27, December 2020","dateiso":"2020-12-27T21:34:00+02:00","ref":"/countdown-to-new-year-astronomy/","summary":"After switching from Windows to Mac, I have reconsidered a few of the applications I use. To my own surprise I ended up with a paid one that’s only available on Apple devices – Bear.","tags":["Javascript"],"title":"Countdown to new year"},{"content":" figure.lazy { display: none; } El selector de imágenes es un componente común que a menudo se necesita para cambiar las fotos de los perfiles de usuario entre muchas otras opciones donde es necesario subir una imagen. Con el fin de proveer a nuestra aplicación de la opción de subir imágenes seleccionadas desde nuestro dispositivo, ya sea en la cámara o la galería, usaremos el complemento hecho por desarrolladores de Flutter.\nPaso 1: Agregar la dependencia a su archivo pubspec.yaml. image_picker: ^0.6.7+14 Paso 2: Configurar las plataformas nativas A continuación, necesitamos configurar los ajustes nativos. Para la plataforma Android, no se necesita configurar nada. Para iOS, abra el archivo Info.plist que se encuentra en la carpeta ios/Runner y agregue las siguientes claves.\n\u0026lt;key\u0026gt;NSPhotoLibraryUsageDescription\u0026lt;/key\u0026gt; \u0026lt;string\u0026gt;Allow access to photo library\u0026lt;/string\u0026gt; \u0026lt;key\u0026gt;NSCameraUsageDescription\u0026lt;/key\u0026gt; \u0026lt;string\u0026gt;Allow access to camera to capture photos\u0026lt;/string\u0026gt; \u0026lt;key\u0026gt;NSMicrophoneUsageDescription\u0026lt;/key\u0026gt; \u0026lt;string\u0026gt;Allow access to microphone\u0026lt;/string\u0026gt; Paso 3: Función de selector de imágenes En la clase State de StatefulWidget de nuestra pantalla, declare una variable de tipo File para contener la imagen elegida por el usuario.\nFile _image; Ahora escriba dos funciones para seleccionar imágenes a través de la cámara y la galería de fotos, respectivamente. El parámetro opcional imageQuality acepta cualquier valor entre 0 y 100, este parámetro se puede ajustar según el tamaño y la calidad que requiera la aplicación. Después de obtener el archivo de imagen, lo guardamos en la variable _image y llamamos a setState () para que se pueda mostrar en la pantalla.\n _imgFromCamera() async { File image = await ImagePicker.pickImage( source: ImageSource.camera, imageQuality: 50 ); setState(() { _image = image; }); } _imgFromGallery() async { File image = await ImagePicker.pickImage( source: ImageSource.gallery, imageQuality: 50 ); setState(() { _image = image; }); } Paso 4: Crear un selector de opciones para seleccionar la cámara o la galería A continuación, se observa la función para mostrar un bottom sheet para que el usuario elija la opción de cámara o galería.\nvoid _showPicker(context) { showModalBottomSheet( context: context, builder: (BuildContext bc) { return SafeArea( child: Container( child: new Wrap( children: \u0026lt;Widget\u0026gt;[ new ListTile( leading: new Icon(Icons.photo_library), title: new Text('Photo Library'), onTap: () { _imgFromGallery(); Navigator.of(context).pop(); }), new ListTile( leading: new Icon(Icons.photo_camera), title: new Text('Camera'), onTap: () { _imgFromCamera(); Navigator.of(context).pop(); }, ), ], ), ), ); } ); } Paso 5: Crear y configurar la vista de imagen en pantalla Finalmente, creemos un soporte de imagen de perfil en la pantalla, que abre el selector al hacer clic y muestra la imagen seleccionada.\n@override Widget build(BuildContext context) { return Scaffold( appBar: AppBar(), body: Column( children: \u0026lt;Widget\u0026gt;[ SizedBox( height: 32, ), Center( child: GestureDetector( onTap: () { _showPicker(context); }, child: CircleAvatar( radius: 55, backgroundColor: Color(0xffFDCF09), child: _image != null ? ClipRRect( borderRadius: BorderRadius.circular(50), child: Image.file( _image, width: 100, height: 100, fit: BoxFit.fitHeight, ), ) : Container( decoration: BoxDecoration( color: Colors.grey[200], borderRadius: BorderRadius.circular(50)), width: 100, height: 100, child: Icon( Icons.camera_alt, color: Colors.grey[800], ), ), ), ), ) ], ), ); } Listo, ejecute la aplicación y debería ver algo como esto.\n figure.lazy { display: none; } ","dateformatted":"18, December 2020","dateiso":"2020-12-18T21:34:00+02:00","ref":"/agregar-selector-imagen-flutter/","summary":"After switching from Windows to Mac, I have reconsidered a few of the applications I use. To my own surprise I ended up with a paid one that’s only available on Apple devices – Bear.","tags":["Flutter"],"title":"Add image selector flutter"},{"content":" figure.lazy { display: none; } En sistemas operativos GNU/Linux cuando nos encontramos detrás de un servidor proxy, puede volverse un poco engorroso utilizar programas que no tengan configuración propia para proxy o comandos como apt-get, o simplemente lo queremos configurar de forma global. Muchos de las distribuciones GNU/Linux usan diferentes manejadores de paquetes los cuales se configuran de formas distintas, además existen muchos programas que necesitan sus especificaciones para configurar la salida a Internet a través de un servidor proxy. Todo este proceso se vuelve muy engorroso de hacer en ambientes donde uses un proxy con autenticación y está cambien cada cierto tiempo o que uses una laptop donde constantemente puedes conectarte a redes donde no se use proxy. Imaginen cambiar toda la configuración cada vez que cambies de red.\n figure.lazy { display: none; } A continuación les dejo algunos ejemplos de como configurar proxy en algunas distros GNU/Linux\n figure.lazy { display: none; } Configurar proxy en la terminal de forma temporal Si queremos usar un proxy de manera puntual, podemos realizar el siguiente paso:\nexport http_proxy=http://username:password@proxyserver:puerto export https_proxy=$http_proxy Configuración de variables de entorno para distribuciones de la familia Debian|Ubuntu: Editar el fichero /etc/environment con tu editor de texto preferido.\nsudo vim /etc/environment Agregamos las siguientes líneas al archivo, debes duplicarlas en mayúscula y minúscula porque(desafortunadamente) algunos programas solo buscan una o la otra:\nhttp_proxy http://username:password@proxyserver:puerto https_proxy http://username:password@proxyserver:puerto ftp_proxy http://username:password@proxyserver:puerto no_proxy localhost,127.0.0.1,localaddress,.localdomain.com #Duplicadas en mayúsculas HTTP_PROXY http://username:password@proxyserver:puerto HTTPS_PROXY http://username:password@proxyserver:puerto FTP_PROXY http://username:password@proxyserver:puerto NO_PROXY localhost,127.0.0.1,localaddress,.localdomain.com Configuración de variables de entorno para distribuciones de la familia RedHat|Fedora|Centos: sudo vim /etc/profile.d/proxy.sh Modificamos los parámetros necesarios\nexport http_proxy=\u0026quot;http://username:password@proxyserver:puerto/\u0026quot; export https_proxy=\u0026quot;http://username:password@proxyserver:puerto/\u0026quot; export ftp_proxy=\u0026quot;http://username:password@proxyserver:puerto/\u0026quot; Configuración de proxy para apt-get, apt, aptitude: Creamos o editamos archivo /etc/apt/apt.conf\nsudo vim /etc/apt/apt.conf Agregamos las siguientes líneas:\nAcquire::http::Proxy \u0026quot;http://username:password@proxyserver:puerto\u0026quot;; Acquire::https::Proxy \u0026quot;http://username:password@proxyserver:puerto\u0026quot;; Acquire::ftp::Proxy \u0026quot;http://username:password@proxyserver:puerto\u0026quot;; #En caso de tener un repo local para el que no necesitemos proxy Acquire::http::Proxy { repositorio.localdomain.com DIRECT; repositorio2.localdomain.com DIRECT; }; Configuración de proxy para yum: Editamos el archivo /etc/yum.conf\n# Indicamos dirección más puerto del proxy proxy=http://proxyserver:puerto # Si el proxy funciona con usuario y contraseña proxy_username=usuario proxy_password=contraseña Configuración de proxy para pacman: Editamos el fichero /etc/pacman.conf y debemos descomentar XferCommand de la siguiente manera:\nXferCommand = /usr/bin/wget --passive-ftp -c -O %o %u figure.lazy { display: none; } Guardamos los cambios y procedemos a editar el fichero de configuración para wget, herramienta utilizada para la descarga de paquetes.\nsudo vim /etc/wgetrc Editamos el archivo de configuración /etc/wgetrc buscamos las siguientes líneas y las descomentamos o agregamos al final del archivo.\nhttps_proxy = http://username:password@proxyserver:puerto http_proxy = http://username:password@proxyserver:puerto ftp_proxy = http://username:password@proxyserver:puerto use_proxy = on Configuración de proxy para nodejs(npm) npm config set proxy http://username:password@proxyserver:puerto npm config set https-proxy http://username:password@proxyserver:puerto Configurar proxy para git git config --global http.proxy http//proxyserver:puerto git config --global https.proxy https//proxyserver:puerto ##En caso de tener conexión directa y necesitemos quitarle la configuración de proxy a git git config --global --unset http.proxy git config --global --unset https.proxy Como se puede apreciar es muy complejo mantener constantemente la configuración de un proxy en tu pc, pero por suerte existen otras opciones que te permiten configurar un proxy de forma global a todo el sistema operativo. En sistemas como Windows o MacOS existen herramientas como Proxifier, ProxyCap entre otras que facilitan la salida a internet a través de un proxy por otra parte sistemas operativos GNU/Linux tenemos alternativas a estos programas como las que listo a continuación.\nRedsock Redsock es una herramienta que permite redirigir cualquier conexión TCP a SOCKS o proxy HTTPS usando su firewall, por lo que la redirección puede ser en todo el sistema o en toda la red. Esta herramienta es muy útil porque nos permite con un solo archivo de configuración poder usar la conexión a través del proxy en todo el sistema operativo.\nPaquetes para las distintas distribuciones linux Archlinux/Manjaro: https://aur.archlinux.org/packages/redsocks-git Debian:http://packages.debian.org/search?searchon=names\u0026amp;keywords=redsocks Gentoo (zugaina overlay):http://gpo.zugaina.org/net-proxy/redsocks Gentoo: https://packages.gentoo.org/packages/net-proxy/redsocks Ubuntu: http://packages.ubuntu.com/search?searchon=names\u0026amp;keywords=redsocks Compilación manual de redsock Para compilar redsock necesitamos clonar su repositorio en GitHub https://github.com/darkk/redsocks y seguir las instrucciones en el README.md. Es necesario que en nuestro sistema esté instalado libevent-2.0.x, al igual que los compiladores gcc y clang. La compilación es tan fácil como ejecutar make en el directorio raíz del proyecto.\nEjecutar redsock Ejecutar redsock depende mucho de la distribución que estés usando y de la forma en la que el paquete instaló redsock. El programa tiene las siguientes opciones de línea de comando:\n -c especifica el camino al archivo de configuración (./redsocks.conf es el usado por defecto) -t esta opción verifica la sintaxis del archivo de configuración -p establece un archivo para escribir el getpid() donde se especifican las siguientes señales: SIGUSR1 vuelca la lista de clientes conectados al registro, SIGTERM y SIGINT terminan el demonio, se cierran todas las conexiones activas. Puedes ver un ejemplo del archivo de configuración en redsocks.conf.example.\nEjemplo de iptables Tienes que construir iptables con seguimiento de conexión y objetivo REDIRECT.\n # Create new chain root# iptables -t nat -N REDSOCKS # Ignore LANs and some other reserved addresses. # See http://en.wikipedia.org/wiki/Reserved_IP_addresses#Reserved_IPv4_addresses # and http://tools.ietf.org/html/rfc5735 for full list of reserved networks. root# iptables -t nat -A REDSOCKS -d 0.0.0.0/8 -j RETURN root# iptables -t nat -A REDSOCKS -d 10.0.0.0/8 -j RETURN root# iptables -t nat -A REDSOCKS -d 100.64.0.0/10 -j RETURN root# iptables -t nat -A REDSOCKS -d 127.0.0.0/8 -j RETURN root# iptables -t nat -A REDSOCKS -d 169.254.0.0/16 -j RETURN root# iptables -t nat -A REDSOCKS -d 172.16.0.0/12 -j RETURN root# iptables -t nat -A REDSOCKS -d 192.168.0.0/16 -j RETURN root# iptables -t nat -A REDSOCKS -d 198.18.0.0/15 -j RETURN root# iptables -t nat -A REDSOCKS -d 224.0.0.0/4 -j RETURN root# iptables -t nat -A REDSOCKS -d 240.0.0.0/4 -j RETURN # Anything else should be redirected to port 12345 root# iptables -t nat -A REDSOCKS -p tcp -j REDIRECT --to-ports 12345 # Any tcp connection made by `luser' should be redirected. root# iptables -t nat -A OUTPUT -p tcp -m owner --uid-owner luser -j REDSOCKS # You can also control that in more precise way using `gid-owner` from # iptables. root# groupadd socksified root# usermod --append --groups socksified luser root# iptables -t nat -A OUTPUT -p tcp -m owner --gid-owner socksified -j REDSOCKS # Now you can launch your specific application with GID `socksified` and it # will be... socksified. See following commands (numbers may vary). # Note: you may have to relogin to apply `usermod` changes. luser$ id uid=1000(luser) gid=1000(luser) groups=1000(luser),1001(socksified) luser$ sg socksified -c id uid=1000(luser) gid=1001(socksified) groups=1000(luser),1001(socksified) luser$ sg socksified -c \u0026quot;firefox\u0026quot; # If you want to configure socksifying router, you should look at # doc/iptables-packet-flow.png, doc/iptables-packet-flow-ng.png and # https://en.wikipedia.org/wiki/File:Netfilter-packet-flow.svg # Note, you should have proper `local_ip' value to get external packets with # redsocks, default 127.0.0.1 will not go. See iptables(8) manpage regarding # REDIRECT target for details. # Depending on your network configuration iptables conf. may be as easy as: root# iptables -t nat -A PREROUTING --in-interface eth_int -p tcp -j REDSOCKS Redsock es una de mis herramientas favoritas para configurar todo mi tráfico a internet a través de un proxy usando el protocolo TCP. A continuación les muestro otra alternativa más reciente que resulta muy interesante y de fácil configuración.\nProxifier-For-Linux Proxifier-For-Linux es una herramienta que actúa como un intermediario entre el servidor proxy y los programas clientes que necesiten acceso a internet. Proxifier trabaja a través de los servidores proxy en nombre de los otros programas. Proxifier actúa como un punto global para configurar las reglas de proxy, que se aplicarán a todos los programas del sistema. Como mencioné anteriormente es un proyecto nuevo por lo que actualmente solo tiene soporte para proxies http.\nComo se explica en el repositorio oficial de Proxifier-for-linux nuestro sistema operativo debe contar con las siguientes dependencias\nDependencias A continuación se muestra la lista de dependencias requeridas para compilar y ejecutar Proxifier, asi como la posible instalación en dependencia del sistema operativo que uses.\nInstalar las dependencias Para comprobar si tienes ya las dependencias instaladas puedes usar el comando which \u0026lt;nombre del paquete\u0026gt;. Ejemplo which autoconf y si te devuelve la ruta es que ya esa dependencia está instalada\n autoconf [$ sudo apt install autoconf] automake [$ sudo apt install automake] libtool [$ sudo apt install libtool] txt2man [$ sudo apt install txt2man] Descargar Proxifier Obtén la última versión estable de Proxifier clonando el repositorio de GitHub.\n$ git clone https://github.com/m0hithreddy/Proxifier-For-Linux.git \u0026amp;\u0026amp; cd Proxifier-For-Linux Construir e Instalar Después de instalar todas las dependencias, obtén el código fuente de Proxifier y dentro del directorio donde está el código ejecuta los siguientes comandos:\n$ autoreconf -vfi $ ./configure $ make all $ sudo make uninstall $ sudo make install Como usar Proxifier El servicio de Proxifier se puede habilitar ejecutando el comando:\n$ sudo systemctl daemon-reload # Reload the service units $ sudo systemctl start proxifier Para más información de Proxifier puedes consultar la ayuda ejecutando el comando $ man proxifier. El archivo de configuración se puede encontrar en la ruta /usr/local/etc/proxifier.conf donde puedes especificar la configuración de tu proxy.\nLa siguiente herramienta que te quiero mostrar es Proxychains\nProxychains Proxychains-ng es un servidor proxy que soporta los protocolos de internet HTTPs, SOCKS4 y SOCKS5 y funciona en plataformas basadas en Unix. Permite que cualquier conexión TCP hecha por un programa siga una serie de proxies(de los protocolos antes mencionados) hasta su destino. La lista de proxies así como la estrategia de selección de los proxies se definen con anterioridad.\nInstalar proxychains Proxychains está disponible con pkgsrc para todos los que lo usen en Linux, NetBSD, FreeBSD, OpenBSD, DragonFlyBSD o Mac OS X. Solo necesita instalar pkgsrc-wip y ejecutar make install en un el directorio wip/proxychains\nInstalar proxychains desde el código fuente Clonar el código fuente de GitHub y ejecutar los siguientes comando:\ngit clone https://github.com/haad/proxychains.git \u0026amp;\u0026amp; cd proxychains # se necesita un compilador de C, preferiblemente gcc ./configure make sudo make install Paquetes para las distintas distribuciones linux Archlinux/Manjaro: https://www.archlinux.org/packages/community/x86_64/proxychains-ng/ Debian: https://packages.debian.org/search?keywords=proxychains Gentoo: https://packages.gentoo.org/packages/net-proxy/proxychains Fedora: https://fedora.pkgs.org/32/fedora-x86_64/proxychains-ng-4.13-5.fc32.x86_64.rpm.html Ubuntu: http://packages.ubuntu.com/search?searchon=names\u0026amp;keywords=proxychains Configuración Proxychains busca la configuración en el siguiente orden:\n Puerto proxy SOCKS5 en la variable de entorno $ {PROXYCHAINS_SOCKS5} (si se establece, no se buscarán más configuraciones)\n Archivo listado en la variable de entorno $ {PROXYCHAINS_CONF_FILE} o proporcionado como un argumento -f para el script o binario de proxychains.\n ./proxychains.conf\n $(HOME)/.proxychains/proxychains.conf\n /etc/proxychains.conf\n Ver más de la configuración en el archivo /etc/proxychains.conf\nEjemplo de como configurar varios proxies Al final del fichero /etc/proxychains.conf se encuentra la lista donde podemos agregar nuestros proxies. Las estrategias de selección de proxies varían entre dynamic_chain, strict_chain, round_robin_chain, random_chain y solo uno puede estar descomentado.\n dynamic_chain: Dinámico: cada conexión se realizará a través de proxies encadenados, todos los proxies encadenados en el orden en que aparecen en la lista, al menos un proxy debe estar en línea para jugar en cadena (se omiten los proxies muertos) de lo contrario, EINTR se devuelve a la aplicación\n strict_chain: Estricto: cada conexión se realizará a través de proxies encadenados, todos los proxies encadenados en el orden en que aparecen en la lista, todos los proxies deben estar en línea para jugar en cadena; de lo contrario, EINTR se devuelve a la aplicación\n round_robin_chain: Round Robin: cada conexión se realizará a través de proxies encadenados de longitud chain_len, todos los proxies encadenados en el orden en que aparecen en la lista, al menos un proxy debe estar en línea para jugar en cadena (se omiten los proxies muertos). el inicio de la cadena de proxy actual es el proxy después del último proxy en la cadena de proxy invocada anteriormente. Si se alcanza el final de la cadena de proxy mientras se buscan proxies, comience de nuevo desde el principio. De lo contrario, EINTR se devuelve a la aplicación. Esta semántica no está garantizada en un entorno multiproceso.\n random_chain: Aleatorio: cada conexión se realizará mediante un proxy aleatorio (o una cadena de proxy, consulte chain_len) de la lista.\n[ProxyList]\nadd proxy here \u0026hellip; meanwile defaults set to \u0026ldquo;tor\u0026rdquo; socks4 127.0.0.1 9050 #psiphon proxy http 127.0.0.1 52525 socks5 127.0.0.1 42552 #Otro Proxy http 192.168.1.11 8080 user password #Mobile proxy http 192.168.44.244 3128 user password\n Ejemplos de uso Ejecutar proxychains \u0026lt;programa a ejecutar a través de un proxy\u0026gt;\n$ proxychains telnet targethost.com En este ejemplo se ejecuta el programa telnet a través de un proxy ( o una cadena de proxies ) especificada por proxychains.con in this example it will run telnet through proxy(or chained proxies) specified by proxychains.conf\nProxychains nos da una gran ventaja al poder encadenar muchos proxies a la vez lo que se usa mucho en ciberseguridad para ocultar la identidad de las peticiones realizadas. Una de las desventajas que tiene proxychains es que se ejecuta en la consola lo cual resulta incómodo cuando usamos programas con interfaz gráfica.\nEl siguiente en la lista es uno de mis favoritos pues es una VPN que permite configurar un proxy global para todo el sistema operativo así como montar un firewall en la pc.\nWindscribe Windscribe es un conjunto de herramientas que permiten bloquear los seguidores de anuncios y los beacons web, restaurar el acceso a contenido bloqueado y ayudarle a proteger su privacidad en línea. Hay dos componentes: la aplicación de escritorio VPN (Windows, MacOS y Linux) y la extensión del navegador (Chrome, Edge, Firefox, Safari, \u0026hellip;)\nLa aplicación de escritorio es un cliente VPN (Virtual Private Network). Crea un túnel encriptado desde tu computadora a los servidores de winscribe, y toda tu actividad se envía a través del túnel. Esto tiene dos ventajas:\n La dirección IP de su proveedor de servicios de Internet (ISP) está enmascarada, por lo que cualquier sitio web que visite o cualquier aplicación que utilice (Skype, proveedores de correo electrónico, BitTorrent, etc.) verá nuestra dirección IP compartida por miles de personas. Su proveedor de servicios de Internet no puede ver lo que hace en línea. Esto es mucho más importante de lo que piensas. Lo primero que se tiene que hacer es crear una cuenta en Windscribe registrándose aquí. Windscribe nos da 2GB de consumo mensual gratis, pero si confirmamos nuestro correo electrónico este aumenta 5GB, además puedes aumentar hasta 15GB mensuales si creas un post en twitter dando en el botón Tweet4Data en la configuración de tu cuenta.\n figure.lazy { display: none; } Instalar Windscribe Después de registrarse se descarga el cliente de escritorio o la extensión para su navegador favorito en la sesión de Descargas. Seguir las instrucciones del enlace de descarga en dependencia del sistema operativo que uses.\nConfiguración del cliente de Windscribe para Linux Lo primero que tenemos que hacer es arrancar el servicio de windscribe para ello ejecutamos el comando:\nsudo systemctl start windscribe Una vez este corriendo el servicio de windscribe debemos configurar el proxy ejecutando el comando windscribe proxy --host \u0026lt;direccion del proxy\u0026gt; --port \u0026lt;puerto\u0026gt; --user \u0026lt;usuario\u0026gt; --password \u0026lt;contraseña\u0026gt;:\nwindscribe proxy --host 19.18.4.54 --port 3128 --user acosta --password \u0026quot;super password\u0026quot; windscribe proxy on Con los comandos anteriores configuramos y activamos windscribe para que use nuestro proxy. Ahora cuando para conectar toda las aplicaciones salgan a internet a través de Windscribe ejecutamos el comando:\nwindscribe connect best # Nos conecta al servidor de windscribe con mejor rendimiento Para consultar la ayuda de windscribe podemos ejecutar el comando windscribe --help\n figure.lazy { display: none; } Estas son algunas de las opciones que existen para configurar la salida a internet a través de un proxy en sistemas operativos GNU-Linux. De todas las variantes mostradas en este artículo mi favorita sin dudas es windscribe por todas las facilidades que ofrece. Espero que les sirva de ayuda en caso que quieran tener configurado de forma global un proxy en linux.\n","dateformatted":"6, December 2020","dateiso":"2020-12-06T21:34:00+02:00","ref":"/configure-proxy-global-on-linux/","summary":"En este artículo comparto algunos tips para configurar un proxy global en sistemas operativos GNU/Linux","tags":["Proxy","Linux"],"title":"Configure global proxy on linux"},{"content":"","dateformatted":"5, September 2017","dateiso":"2017-09-05T07:43:59+02:00","ref":"/kortkommandon-windows7/","summary":"","tags":null,"title":"Kortkommandon Windows 7"}]